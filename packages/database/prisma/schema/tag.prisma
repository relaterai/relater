// Represents a tag that can be applied to snapshots
model Tag {
  id              String     @id @default(cuid())
  /// Unique name of the tag, e.g., a/b/c
  name            String     @unique
  /// 1st name of the tag, e.g., a
  firstPath       String     @map("first_path")
  /// Array of tag path segments, e.g., for tag "a/b/c" it contains ["a", "a/b", "a/b/c"]
  pathSegments    String[]   @map("path_segments")
  /// Color code for the tag
  color           TagColor   @default(gray)
  /// Emoji representing the tag
  emoji           String     @default("#")
  /// Flag for pinned tags
  pinned          Boolean    @default(false)
  /// Indicates if the tag is auto-generated by AI
  isAutoGenerated Boolean    @default(true) @map("is_auto_generated")
  userId          String     @map("user_id")
  /// Indicates if the tag is deleted
  isDeleted       Boolean    @default(false) @map("is_deleted")
  deletedAt       DateTime?  @map("deleted_at")
  createdAt       DateTime   @default(now()) @map("created_at")
  updatedAt       DateTime   @updatedAt @map("updated_at")
  snapshots       Snapshot[]

  @@unique([userId, name])
  @@index([userId])
  @@index([name])
  @@index([userId, isAutoGenerated])
  @@index([userId, isDeleted])
  @@index([isDeleted])
  @@index([firstPath])
  @@index([pathSegments], type: Gin)
  @@map("tags")
}

// https://ui.shadcn.com/colors
enum TagColor {
  gray
  red
  orange
  yellow
  zinc
  neutral
  stone
  amber
  lime
  green
  emerald
  teal
  cyan
  sky
  blue
  indigo
  violet
  purple
  fuchsia
  pink
  rose
}
